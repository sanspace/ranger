<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßÆ GKE CIDR Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>üßÆ GKE CIDR Calculator</h1>
    <p>Plan your GKE cluster IP ranges based on target pods per node.</p>
    <p><i>Assumes VPC-native cluster & GKE Flexible Pod CIDR allocation.</i></p>

    <aside class="cidr-legend-compact">
        <span class="legend-title">CIDR Reference (Mask &rarr; Total IPs):</span>
        <table>
            <thead> <tr> <th>/32</th><th>/31</th><th>/30</th><th>/29</th><th>/28</th><th>/27</th><th>/26</th><th>/25</th>
                    <th>/24</th><th>/23</th><th>/22</th><th>/21</th><th>/20</th><th>/19</th><th>/18</th><th>/17</th><th>/16</th>
                </tr>
            </thead>
            <tbody>
                <tr> <td>1</td><td>2</td><td>4</td><td>8</td><td>16</td><td>32</td><td>64</td><td>128</td>
                    <td>256</td><td>512</td><td>1,024</td><td>2,048</td><td>4,096</td><td>8,192</td><td>16,384</td><td>32,768</td><td>65,536</td>
                </tr>
            </tbody>
        </table>
    </aside>

    <div class="input-section">

        <div class="input-group">
            <label for="maxPodsInput">Target Max Pods per Node:</label>
            <input type="number" id="maxPodsInput" min="1" max="256" value="32">
        </div>

        <div class="input-group">
            <label for="podMask">Cluster Pod CIDR Mask (/):</label>
            <input type="number" id="podMask" min="8" max="28" value="20">
        </div>

        <div class="input-group">
            <label for="nodeMask">Cluster Node CIDR Mask (/):</label>
            <input type="number" id="nodeMask" min="8" max="29" value="22">
        </div>

        <div class="input-group">
            <label for="serviceMask">Cluster Service CIDR Mask (/):</label>
            <input type="number" id="serviceMask" min="8" max="27" value="24">
        </div>

        <div class="input-group button-container">
             <button id="calculateBtn">Calculate</button>
        </div>

    </div>

    <div class="results-section" id="results">

        <div class="results-left-column">
            <h2>üìù Results</h2>
            <div id="summary">
                </div>
        </div>

        <div class="results-right-column">

            <div class="allocation-group">
                <h3>üñ•Ô∏è Node IP Allocation</h3>
                <div id="nodeVizContainer" class="viz-container">
                    <div id="nodeVizBar" class="viz-bar">
                        <span id="nodeVizText" class="viz-text"></span>
                    </div>
                </div>
                <div id="nodeVizLegend"></div>
            </div>

            <div class="allocation-group">
                <h3>ü´õ Pod IP Allocation</h3>
                <div id="podVizContainer" class="viz-container">
                    <div id="podVizBar" class="viz-bar">
                        <span id="podVizText" class="viz-text"></span>
                    </div>
                </div>
                <div id="podVizLegend"></div>
            </div>

            <div class="allocation-group">
                <h3>üîó Service IP Allocation</h3>
                <div id="serviceVizContainer" class="viz-container">
                     <div id="serviceVizBar" class="viz-bar">
                        <span id="serviceVizText" class="viz-text"></span>
                    </div>
                </div>
                 <div id="serviceVizLegend"></div>
             </div>

        </div>
    </div>

    <div id="cluster-visualization" class="cluster-viz-section">
        <h2>‚õìÔ∏è Cluster Structure Overview</h2>
        <div class="cluster-container">
            <span class="cluster-label">GKE Cluster</span>

            <div class="node-area" id="struct-node-area">
                <div class="area-label">
                    Nodes (Max: <span id="struct-max-nodes">N/A</span>)
                    <small><em>(From Node CIDR: /<span id="struct-node-mask">?</span>)</em></small>
                    <span class="unused-info" id="struct-node-unused-info"></span>
                </div>
                <div class="node-box" id="struct-node-box">
                    <span class="element-label">Example Node</span>

                    <div class="node-details">
                         <small>Pod Range: /<span id="struct-node-pod-mask">?</span></small>
                    </div>

                    <div class="pod-area" id="struct-pod-area">
                        <div class="pod-icons">
                            <span class="pod-icon"></span>
                            <span class="pod-icon"></span>
                            <span class="pod-icon"></span>
                            <span class="pod-icon faded-icon"></span>
                        </div>
                         <div class="area-label pods-label">
                            Pods (Max: <span id="struct-max-pods-node">N/A</span> / Node)
                             <small><em>(From Pod CIDR: /<span id="struct-pod-mask">?</span>)</em></small>
                            <span class="unused-info" id="struct-pod-unused-info"></span>
                        </div>
                    </div>
                </div>
                <div class="node-box faded-box">
                    <span class="element-label">...more nodes</span>
                </div>
            </div>

            <div class="service-area">
                 <div class="area-label">
                    Services (Max: <span id="struct-max-services">N/A</span>)<br>
                     <small><em>(From Service CIDR: /<span id="struct-svc-mask">?</span>)</em></small>
                 </div>
                 <div class="service-icon-container">
                     <span class="service-icon"></span>
                     <span class="service-icon"></span>
                     <span class="service-icon faded-icon"></span>
                 </div>
            </div>

        </div>
    </div> 
    <script src="script.js"></script>
</body>
</html>
